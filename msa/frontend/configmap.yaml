---
# ğŸ“¦ ConfigMap: Frontend HTML ì œê³µ
apiVersion: v1
kind: ConfigMap
metadata:
  name: frontend-html
data:
  login.html: |
    <!DOCTYPE html>
    <html lang="ko">
    <head>
      <meta charset="UTF-8">
      <title>ë¡œê·¸ì¸</title>
      <style>
        body { font-family: sans-serif; margin: 20px; max-width: 400px; margin-left: auto; margin-right: auto; color: #333; }
        h1 { margin-top: 0; text-align: center; }
        form { background: #f9f9f9; border: 1px solid #ddd; padding: 20px; border-radius: 6px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        input { width: 100%; padding: 10px; margin: 8px 0; box-sizing: border-box; border: 1px solid #ccc; border-radius: 4px; font-size: 14px; }
        button { width: 100%; padding: 10px; background: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; }
        button:hover { background: #45a049; }
      </style>
    </head>
    <body>
      <h1>ë¡œê·¸ì¸</h1>
      <form method="POST" action="/api/auth/login">
        <label for="username">ì•„ì´ë””:</label><br>
        <input type="text" id="username" name="username" required><br>
        <label for="password">ë¹„ë°€ë²ˆí˜¸:</label><br>
        <input type="password" id="password" name="password" required><br>
        <button type="submit">ë¡œê·¸ì¸</button>
      </form>
    </body>
    </html>

  register.html: |
    <!DOCTYPE html>
    <html lang="ko">
    <head>
      <meta charset="UTF-8">
      <title>íšŒì›ê°€ì…</title>
      <style>
        body { font-family: sans-serif; margin: 20px; max-width: 400px; margin-left: auto; margin-right: auto; color: #333; }
        h1 { margin-top: 0; text-align: center; }
        form { background: #f9f9f9; border: 1px solid #ddd; padding: 20px; border-radius: 6px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        input { width: 100%; padding: 10px; margin: 8px 0; box-sizing: border-box; border: 1px solid #ccc; border-radius: 4px; font-size: 14px; }
        button { width: 100%; padding: 10px; background: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; }
        button:hover { background: #45a049; }
      </style>
    </head>
    <body>
      <h1>íšŒì›ê°€ì…</h1>
      <form method="POST" action="/api/auth/register">
        <label for="username">ì•„ì´ë””:</label><br>
        <input type="text" id="username" name="username" required><br>
        <label for="password">ë¹„ë°€ë²ˆí˜¸:</label><br>
        <input type="password" id="password" name="password" required><br>
        <button type="submit">ê°€ì…</button>
      </form>
    </body>
    </html>

  board.html: |
    <!DOCTYPE html>
    <html lang="ko">
    <head>
      <meta charset="UTF-8" />
      <title>ê²Œì‹œíŒ</title>
      <style>
        body { font-family: sans-serif; margin: 20px; max-width: 800px; margin-left: auto; margin-right: auto; color: #333; }
        h1 { margin-top: 0; }
        form { background: #f9f9f9; border: 1px solid #ddd; padding: 20px; border-radius: 6px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); margin-bottom: 30px; }
        form input[type="text"], form textarea { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; margin-bottom: 10px; box-sizing: border-box; font-size: 14px; }
        form button { padding: 10px 20px; background: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; }
        form button:hover { background: #45a049; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: left; font-size: 14px; }
        th { background: #f2f2f2; }
      </style>
    </head>
    <body>
      <h1>ê²Œì‹œê¸€ ì‘ì„±</h1>
      <form id="postForm">
        <input type="text" id="title" placeholder="ì œëª©" required>
        <textarea id="content" placeholder="ë‚´ìš©" required rows="6"></textarea>
        <button type="submit">ë“±ë¡</button>
      </form>

      <h1>ê²Œì‹œê¸€ ëª©ë¡</h1>
      <table>
        <thead>
          <tr>
            <th>ì œëª©</th>
            <th>ë‚´ìš©</th>
            <th>ì‘ì„±ì¼</th>
          </tr>
        </thead>
        <tbody id="posts"></tbody>
      </table>

      <script>
        async function loadPosts() {
          try {
            const response = await fetch("/api/board/posts");
            if (!response.ok) throw new Error("ê²Œì‹œê¸€ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨!");

            const data = await response.json();
            let posts = data.posts;
            posts.sort((a, b) => new Date(b.created_at) - new Date(a.created_at));

            const postsTbody = document.getElementById("posts");
            if (posts.length === 0) {
              postsTbody.innerHTML = "<tr><td colspan='3'>ì•„ì§ ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</td></tr>";
            } else {
              postsTbody.innerHTML = posts.map(p =>
                `<tr>
                  <td>${p.title}</td>
                  <td>${p.content}</td>
                  <td>${p.created_at}</td>
                </tr>`
              ).join("");
            }
          } catch (err) {
            console.error(err);
            alert("ê²Œì‹œê¸€ ë¶ˆëŸ¬ì˜¤ê¸° ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤!");
          }
        }

        document.getElementById("postForm").onsubmit = async (e) => {
          e.preventDefault();
          const title = document.getElementById("title").value.trim();
          const content = document.getElementById("content").value.trim();

          if (!title || !content) {
            alert("ì œëª©ê³¼ ë‚´ìš©ì„ ëª¨ë‘ ì…ë ¥í•˜ì„¸ìš”!");
            return;
          }

          try {
            const response = await fetch("/api/board/posts", {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({ title, content })
            });

            if (response.ok) {
              const data = await response.json();
              alert(data.message);
              document.getElementById("title").value = "";
              document.getElementById("content").value = "";
              loadPosts();
            } else {
              alert("ê²Œì‹œê¸€ ë“±ë¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤!");
            }
          } catch (err) {
            console.error(err);
            alert("ê²Œì‹œê¸€ ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤!");
          }
        };

        loadPosts();
      </script>
    </body>
    </html>
